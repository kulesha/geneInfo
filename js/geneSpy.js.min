function repeat(e,n){for(var t="";t.length<n;)t+=e;return t}function getTextWidth(e,n){var t=getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas")),a=t.getContext("2d");a.font=n;var s=a.measureText(e);return s.width}function getSelectedText(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e=e.replace(/[^A-Z]/g,"")}function getSelectedDNA(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e=e.replace(/\d+\:[A-Z\-\s]+\:\d+/g,""),e=e.replace(/[^A-Z]/g,"")}function elementCurrentStyle(e,n){if(e.currentStyle){var t=0,a="",s=!1;for(t=0;t<n.length;t++)"-"!=n[t]?(a+=s?n[t].toUpperCase():n[t],s=!1):s=!0;return n=a,e.currentStyle[n]}return getComputedStyle(e,null).getPropertyValue(n)}var geneFields=["id","start","end","strand","description","display_name","seq_region_name","url"],exonStart='<div class="exon">',exonEnd="</div>",foundStart='<span class="tag">',foundEnd="</span>",markStart='<h5 class="mark">',markEnd="</h5>";String.prototype.getDNAPos=function(e){return this.split(/[A-Z]/,e).join("X").length},String.prototype.regexIndexOf=function(e,n){var t=this.substring(n||0).search(e);return t>=0?t+(n||0):t},String.prototype.regexLastIndexOf=function(e,n){e=e.global?e:new RegExp(e.source,"g"+(e.ignoreCase?"i":"")+(e.multiLine?"m":"")),"undefined"==typeof n?n=this.length:0>n&&(n=0);for(var t=this.substring(0,n+1),a=-1,s=0;null!=(result=e.exec(t));)a=result.index,e.lastIndex=++s;return a};var myApp=angular.module("geneSpyApp",["ngSanitize","ui.bootstrap"]).filter("baseCount",function(){return function(e){return e?e.split(re).length-1:0}});myApp.controller("menuCtrl",["$scope","$modal",function(e,n){e.items=[],this.show=function(t){e.items[0]=t;n.open({templateUrl:"myModalContent.html",controller:ModalInstanceCtrl,resolve:{items:function(){return e.items}}})}}]);var ModalInstanceCtrl=function(e,n,t){e.items=t,e.ok=function(){n.close()}};myApp.controller("geneSpyCtrl",["$scope","$http","$sce","$location","$anchorScroll","$window","$filter",function(e,n,t,a,s,r,i){var o=this;o.trustedHtml=t.trustAsHtml(this.textContent),e.chunks=[{id:12e4,name:"120K"},{id:25e4,name:"250K"},{id:4e5,name:"400K"}],e.formInfo={gene:"",width:100,coding:!1,chunkSize:25e4},e.serverList={Ensembl:{name:"ensembl",division:"ensembl",label:"Ensembl ( GRCh38 )",url:"http://rest.ensembl.org",eurl:"http://www.ensembl.org"},grch37:{name:"grch37",division:"ensembl",label:"Ensembl ( GRCh37 )",url:"http://grch37.rest.ensembl.org",eurl:"http://grch37.ensembl.org"}},e.range=function(e,n,t){t=t||1;for(var a=[],s=e;n>=s;s+=t)a.push(s);return a},e.clearAllMarkup=function(){e.currentAA=[],e.resetSequence()},e.resetMarkup=function(){for(var n in e.geneData.segments){var t=e.geneData.segments[n],a=new RegExp('<h5 class="find">',"g"),s=new RegExp("</h5>","g"),r=t.replace(a,""),i=r.replace(s,"");e.geneData.segments[n]=i}},e.resetSequence=function(){if(e.geneData){var n=e.formInfo.coding?e.geneData.cds:e.geneData.dna;if(n){var t=e.formInfo.width,a=".{1,"+t+"}",s=new RegExp(a,"g"),r=n.match(s);e.geneData.segments=r}}},e.resetFound=function(){if(o.foundSeq="",e.currentTag>-1){var n=e.geneData.segments[e.currentTag];n=n.replace(/\<span class=\"tag\">(.)<\/span>/gm,"$1"),e.geneData.segments[e.currentTag]=n,e.currentTag=-1}if(e.currentAA.length){e.currentAA.map(function(n){var t=e.geneData.segments[n];t=t.replace(/\<span class=\"tag\">(.)<\/span>/gm,"$1"),e.geneData.segments[n]=t});var n=e.geneData.psegments[e.currentAA[1]];n=n.replace(/\<span class=\"tag\">(.)<\/span>/gm,"$1"),e.geneData.psegments[e.currentAA[1]]=n,e.currentAA=[]}},this.reset=function(){if(e.message="",e.location=0,e.chunksNum=0,e.geneData){if(e.geneData.tlist)for(var n in e.geneData.tlist)e.geneData.tlist[n].id=null,e.geneData.tlist[n].plen=null,e.geneData.tlist[n].Exon=[];if(e.geneData.segments=[],e.geneData.psegments=[],e.geneData.isegments=[],e.geneData.mappings)for(var n in e.geneData.mappings)e.geneData.mappings[n]=null;for(var n in e.geneData)e.geneData[n]=null}e.geneData={},e.currentAA=[],e.formInfo.coding=!1,o.foundSeq=""},this.getFontWidth=function(){var n=document.getElementById("tmp"),t=elementCurrentStyle(n,"font-variant")+" "+elementCurrentStyle(n,"font-size")+" "+elementCurrentStyle(n,"font-family"),a=repeat("A",e.formInfo.width);e.fontWidth=getTextWidth(a,t)/e.formInfo.width},this.recordVisit=function(e){r.ga&&r.ga("send","pageview",{page:e})},this.updateSpecies=function(){var t="info/species.json",a={division:"grch37",taxon_id:"10009606",name:"homo_sapiens",display_name:"Human",accession:"GCA_000001405.15",assembly:"GRCh37"};e.species="homo_sapiens",e.crispr_db="hg19",n.get(t).success(function(e){o.speciesList=e.species,o.speciesList.push(a)}),e.currentSpecies=a,o.reset()},e.extlinks=[{id:"crispr",name:"CRISPRdirect",url:"http://crispr.dbcls.jp",stat:"/tool/crispr",on:{homo_sapiens:{assembly:"GRCh37",db:"hg19"},mus_musculus:{assembly:"GRCm38",db:"mm10"},rattus_norvegicus:{assembly:"Rnor_5.0",db:"rn5"},sus_scrofa:{assembly:"Sscrofa10.2",db:"calJac3"},callithrix_jacchus:{assembly:"C_jacchus3.2.1",db:"susScr3"},gallus_gallus:{assembly:"Galgal4",db:"galGal4"},xenopus_tropicalis:{assembly:"JGI_4.2",db:"xenTro3"},xenopus_laevis:{assembly:"JGI_7.1",db:"Xenla7"},danio_rerio:{assembly:"Zv9",db:"danRer7"},ciona_intestinalis:{assembly:"JGI_2.1",db:"ci2"},drosophila_melanogaster:{assembly:"BDGP R5",db:"dm3"},caenorhabditis_elegans:{assembly:"WS220",db:"ce10"},arabidopsis_thaliana:{assembly:"TAIR10",db:"TAIR10"},oryza_sativa:{assembly:"Os-Nipponbare-Reference-IRGSP-1.0",db:"rice"},sorghum_bicolor:{assembly:"Sorghum bicolor v2.1",db:"sorBic"},bombyx_mori:{assembly:"Bmor1",db:"bmor1"},saccharomyces_cerevisiae:{assembly:"sacCer3",db:"sacCer3"},schizosaccharomyces_pombe:{assembly:"ASM294v2",db:"pombe"}},params:{homo_sapiens:{assembly:"GRCh37",db:"hg19"},mus_musculus:{assembly:"GRCm38",db:"mm10"},rattus_norvegicus:{assembly:"Rnor_5.0",db:"rn5"},sus_scrofa:{assembly:"Sscrofa10.2",db:"calJac3"},callithrix_jacchus:{assembly:"C_jacchus3.2.1",db:"susScr3"},gallus_gallus:{assembly:"Galgal4",db:"galGal4"},xenopus_tropicalis:{assembly:"JGI_4.2",db:"xenTro3"},xenopus_laevis:{assembly:"JGI_7.1",db:"Xenla7"},danio_rerio:{assembly:"Zv9",db:"danRer7"},ciona_intestinalis:{assembly:"JGI_2.1",db:"ci2"},drosophila_melanogaster:{assembly:"BDGP R5",db:"dm3"},caenorhabditis_elegans:{assembly:"WS220",db:"ce10"},arabidopsis_thaliana:{assembly:"TAIR10",db:"TAIR10"},oryza_sativa:{assembly:"Os-Nipponbare-Reference-IRGSP-1.0",db:"rice"},sorghum_bicolor:{assembly:"Sorghum bicolor v2.1",db:"sorBic"},bombyx_mori:{assembly:"Bmor1",db:"bmor1"},saccharomyces_cerevisiae:{assembly:"sacCer3",db:"sacCer3"},schizosaccharomyces_pombe:{assembly:"ASM294v2",db:"pombe"}}},{id:"nblast",name:"BLAST(ncbi)",url:"http://www.ncbi.nlm.nih.gov/blast/Blast.cgi",stat:"/tool/nblast",all:1},{id:"eblast",name:"BLAST(ensembl)",url:e.formInfo.blast,stat:"/tool/eblast",all:1}],e.valid_link=function(n){if(n){if(n.all)return!0;if(n.on){var t=e.currentSpecies,a=t.name,s=t.taxon_id,r=n.on[a].assembly;for(var i in o.speciesList)if(o.speciesList[i].taxon_id==s&&o.speciesList[i].assembly==r)return!0}}return!1},e.findGene=function(){o.reset(),e.loading=!0;var t=e.formInfo.gene.toUpperCase(),a=e.currentSpecies,s=e.serverList[a.division],r=a.name;e.message="Looking for "+t,o.recordVisit("/gene/"+t),o.recordVisit("/species/"+a.display_name+"-"+a.assembly);var i=s.url+"/lookup/symbol/"+r+"/"+t+"?content-type=application/json;expand=1";n.get(i).success(function(n){n.url=s.eurl+"/"+r+"/Gene/Summary?g="+n.id,geneFields.map(function(t){e.geneData[t]=n[t]});var t=n.end-n.start+1;e.geneData.seqlen=t;var a=e.formInfo.chunkSize;t>a&&(e.chunksNum=Math.floor(t/a)+1),e.geneData.Transcript=n.Transcript.map(function(e){var n={id:e.id,plen:0};return e.Translation&&(n.plen=e.Translation.length,n.pid=e.Translation.id,"1"===e.is_canonical&&(n.plen+=1e5)),n.Exon=e.Exon.map(function(e){return{start:e.start,end:e.end}}),n}),e.setPage(1)}).error(function(n,t){400===t&&(e.message=n.error),e.loading=!1})},o.getFontWidth(),o.updateSpecies();var c=a.path(),l=/^\/gene\/([\d\w]+)/i,g=l.exec(c);g?(e.formInfo.gene=g[1],e.findGene()):o.recordVisit("/"),e.baseCount=function(e){return e?e.split(/[A-Z]/).length-1:1},e.getCurrentTranscript=function(){var n;for(var t in e.geneData.Transcript)e.geneData.Transcript[t].id===e.currentTab&&(n=e.geneData.Transcript[t]);return n},this.getExonNumber=function(e,n,t){var a=n.Exon,s=0;if(-1===e.strand){var r=e.end-t;for(var i in a)a[i].end>=r&&s++}else{var r=t+e.start;for(var i in a)a[i].start<=r&&s++}return{bp:r,exon:s}},e.getBPfromCDS=function(n){var t,a,s=e.geneData.strand,r=e.geneData.start,i=e.geneData.end,o=e.geneData.mappings,c=0,l=0;for(var g in o)if(0===o[g].gap){t=0>s?i-o[g].end:o[g].start-r,a=0>s?i-o[g].start:o[g].end-r,c++;var u=c+a-t;if(n>=c&&u>=n){l=t+n-c;break}c=u}return l>0&&(l=s>0?r+l:i-l),l},e.getBPfromAA=function(n){var t,a,s=[],r=e.geneData.strand,i=e.geneData.start,o=e.geneData.end,c=3*(n-1)+1,l=e.geneData.mappings,g=0;for(var u in l)if(0===l[u].gap){t=0>r?o-l[u].end:l[u].start-i,a=0>r?o-l[u].start:l[u].end-i,g++;for(var d=g+a-t;s.length<3&&c>=g&&d>=c;){var m=t+c-g;s.push(m),c++}if(3==s.length)return s;g=d}return s},e.findAA=function(n){e.resetFound();var t=e.formInfo.pos;if(t){var r=e.getCurrentTranscript(n);if(t>r.plen%1e5)return void(o.foundSeq="Length is only "+r.plen%1e5+" aa");if(r&&r.pid){var c=e.getBPfromAA(t),l=e.formInfo.chunkSize,g=e.chunksNum?Math.ceil(c[1]/l):1;g!==e.geneData.currentPage&&e.setPage(g,e.findAA);var u,d=e.formInfo.coding;u=d?[3*(t-1),3*(t-1)+1,3*(t-1)+2]:c.map(function(n){return n-l*(e.geneData.currentPage-1)});var m=u[1],f=e.formInfo.width,p=Math.floor(m/f),h=m%f,b=e.geneData.psegments[p];if(b){var v=b.substr(0,h)+foundStart+b.substr(h,1)+foundEnd+b.substr(h+1);e.geneData.psegments[p]=v,a.hash("a_"+p);var D="",S=o.getExonNumber(e.geneData,r,c[0]);D='<div style="margin:0">at '+i("number")(S.bp)+" bp</div>",D=c[2]-c[0]==2?D+"in exon "+S.exon:D+"in exons "+S.exon+" and "+(S.exon+1);var y=d?e.geneData.cds:e.geneData.dna,_=y.substr(u[0],1)+y.substr(u[1],1)+y.substr(u[2],1);o.foundSeq="Found aa: "+b.substr(h,1)+" = "+_+D,s();var x=e.geneData.segments.length;for(var A in u)if(u[A]>=0){var p=Math.floor(u[A]/f),h=u[A]%f;if(x>p){e.currentAA.push(p);var b=e.geneData.segments[p],I=b.getDNAPos(h+1),v=b.substr(0,I)+foundStart+b.substr(I,1)+foundEnd+b.substr(I+1);e.geneData.segments[p]=v}}}}}},e.findBP=function(){e.resetFound();var n=e.formInfo.pos;if(n){var t=e.formInfo.width,r=e.formInfo.coding,i=r?e.geneData.cds:e.geneData.dna;if(n>e.geneData.seqlen)return void(o.foundSeq="Length is only "+e.geneData.seqlen+" bp");var c=e.formInfo.chunkSize,l=e.chunksNum?Math.ceil(n/c):1;l!==e.geneData.currentPage&&e.setPage(l,e.findBP),n-=c*(e.geneData.currentPage-1);var g=i.getDNAPos(n),u=Math.floor(g/t),d=g%t,m=e.geneData.segments[u],f=m.getDNAPos(d+1),p=m.substr(f,1),h=m.substr(0,f)+foundStart+p+foundEnd+m.substr(f+1);o.foundSeq="Found bp: "+p,e.geneData.segments[u]=h,e.currentTag=u,a.hash("a_"+u),s()}},e.setPage=function(t,s){var r=e.geneData,i=e.formInfo.chunkSize,o=e.currentSpecies,c=o.name;e.loading=!0;var l,g;r.strand>0?(l=r.start+i*(t-1),g=i?l+i-1:r.end,g>r.end&&(g=r.end)):(g=r.end-i*(t-1),l=i?g-i+1:r.start,l<r.start&&(l=r.start)),e.geneData.currentPage=t,e.geneData.seqStart=l,e.geneData.seqEnd=g;var u=e.serverList[o.division],d=u.url+"/sequence/region/"+c+"/"+r.seq_region_name+":"+l+".."+g+":"+r.strand+"?content-type=application/json";n.get(d).success(function(n){var t=e.formInfo.width,r=".{1,"+t+"}",i=new RegExp(r,"g"),o=n.seq.match(i);e.geneData.dna=n.seq,e.geneData.segments=o,e.loading=!1;var c=e.formInfo.gene.toUpperCase();a.path("gene/"+c),e.geneData.currentTranscript?e.selectTranscript(e.geneData.currentTranscript,s):s&&s()}),e.message=""},this.markDNAMulti=function(n,t,a){var s,r=e.formInfo.width,i=Math.floor(t/r),o=t%r,c=Math.floor(a/r),l=a%r,g='<h5 class="find">',u="</h5>",d=e.geneData.segments;s=d[i];var m=s.split(/[A-Z]/,o+1).join("X").length,f=s.substr(0,m)+g+s.substr(m);for(e.geneData.segments[i]=f;c>i;){var p=f.split(/[A-Z]/,r).join("X").length+1,h=f.substr(0,p)+u+f.substr(p),b=h.replace(/<h5 class="find">([A-Z]*)<div class="exon">/g,'<h5 class="find">$1</h5><div class="exon"><h5 class="find">'),v=b.replace(/<h5 class="find">([A-Z]*)<\/div>/g,'<h5 class="find">$1</h5></div><h5 class="find">');e.geneData.segments[i]=v,i++;var D=e.geneData.segments[i].getDNAPos(1),S=e.geneData.segments[i].substr(0,D)+g+e.geneData.segments[i].substr(D);e.geneData.segments[i]=S,f=S}var y=d[c];m=y.split(/[A-Z]/,l+1).join("X").length;var h=y.substr(0,m)+u+y.substr(m),b=h.replace(/<h5 class="find">([A-Z]*)<div class="exon">/g,'<h5 class="find">$1</h5><div class="exon"><h5 class="find">'),v=b.replace(/<h5 class="find">([A-Z]*)<\/div>/g,'<h5 class="find">$1</h5></div><h5 class="find">');e.geneData.segments[c]=v},e.selectTranscript=function(n,t){e.clearAllMarkup(),n&&(e.currentTab=n);var a=e.getCurrentTranscript(o);e.geneData.currentTranscript=a.id,a.pid&&e.getCodingSeq(a),e.resetSequence(),e.markupExons(a),a.pid?e.markupTranslation(a,t):t&&t()},e.getCodingSeq=function(t){var a=e.currentSpecies,s=e.serverList[a.division],r=s.url+"/sequence/id/"+t.id+"?content-type=application/json;type=cds;mask_feature=1";n.get(r).success(function(n){e.geneData.cds=n.seq})},this.findDNA=function(){e.resetMarkup();for(var n,t,a=e.formInfo.pos.toUpperCase(),s=e.formInfo.coding,r=s?e.geneData.cds:e.geneData.dna,i=a.length,c=0;(n=r.indexOf(a,t))>-1;){var l=n,g=n+i;o.markDNAMulti(s,l,g,"mark"),c++,t=n+i}o.foundSeq="Found "+c+" matches"},this.update_blast=function(){e.menuHide();var n=e.currentSpecies,t=e.serverList[n.division];e.formInfo.blast=t.url+"/"+n.name+"/Tools/Blast",e.crispr_db=e.extlinks[0].params[n.name].db,$("#blast_form").action=e.formInfo.blast},e.markupExons=function(n){var t=e.geneData.strand,a=e.geneData.start,s=e.geneData.end,r=e.formInfo.width,i=e.geneData.segments,o=e.formInfo.coding;if(o)return void(e.geneData.segments=i.map(function(e){return exonStart+e+exonEnd}));var c=0,l=-1,g=n.Exon,u=e.geneData.seqStart,d=e.geneData.seqEnd,m=e.formInfo.chunkSize,f=m*(e.geneData.currentPage-1);for(var p in g)if(!(g[p].start>d||g[p].end<u)){o?(l=g[p].end,c=g[p].start):(c=0>t?s-n.Exon[p].end:n.Exon[p].start-a,l=0>t?s-n.Exon[p].start+1:n.Exon[p].end-a+1),c-=f,0>c&&(c=0),l-=f,l>=m&&(l=m-1);var h=Math.floor(c/r),b=c%r,v=Math.floor(l/r),D=l%r,S=i[h],y=S.substr(0,b)+exonStart+S.substr(b);for(e.geneData.segments[h]=y;v>h;)e.geneData.segments[h]=e.geneData.segments[h]+exonEnd,h++,e.geneData.segments[h]=exonStart+e.geneData.segments[h];var S=i[v];D+=exonStart.length,y=D>=S.length-1?S+exonEnd:S.substr(0,D)+exonEnd+S.substr(D),e.geneData.segments[v]=y}},e.markupTranslation=function(t,a){var s=e.currentSpecies,r=e.serverList[s.division],i=r.url+"/sequence/id/"+t.pid+"?content-type=application/json";n.get(i).success(function(s){e.geneData.pseq="-"+s.seq.split("").join("--")+"-";var i=r.url+"/map/cds/"+t.id+"/1..3000000?content-type=application/json";n.get(i).success(function(n){var t=-1,s=e.geneData.pseq,r=e.geneData.strand,i=e.geneData.start,o=e.geneData.end,c="",l=e.formInfo.coding,g=e.formInfo.chunkSize,u=g*(e.geneData.currentPage-1),d=0,m=0;if(e.geneData.mappings=n.mappings,l)c=s;else{var f=0,p=-1;for(var h in n.mappings)if(0===n.mappings[h].gap){if(f=0>r?o-n.mappings[h].end:n.mappings[h].start-i,p=0>r?o-n.mappings[h].start:n.mappings[h].end-i,u>p){d+=p-f+1;continue}if(u>f&&(d+=u-f,f=u),f-=u,f>g)continue;p-=u,p>=g&&(p=g-1),c+=repeat(" ",f-t-1);var b=p-f+1;d&&(s=s.substr(d),m=d,d=0),c+=s.substr(0,b),s=s.substr(b),t=p}}var v=e.formInfo.width,D=".{1,"+v+"}",S=new RegExp(D,"g"),y=c.match(S);e.geneData.psegments=y,e.geneData.isegments=[];var _=1;m&&(_+=Math.ceil(m/3));for(var h in y){var x=y[h].split(/[A-Z]/).length-1;x&&(e.geneData.isegments[h]=_,_+=x)}a&&a()})})},e.menuHide=function(){$("#menuSelect").hide(),e.menu_shown=0},e.currentSelect={start:-1,stop:-1}}]),myApp.controller("TabController",["$scope","$http","$location","$anchorScroll","$window","$filter",function(e,n,t,a,s,r){e.currentTab="-";var i=this,o=this;this.getLinePos=function(n){var t=0,a=void 0!==n.offsetX?n.offsetX-t:n.clientX-$(n.target).offset().left,s=Math.floor(a/e.fontWidth)+1;return 1>s?s=1:s>e.formInfo.width&&(s=e.formInfo.width),s},this.click=function(){},this.dblclick=function(){e.menuHide(),i.clear_select()},this.start_select=function(n,t){var a=this.getLinePos(n);e.currentSelect.start=e.formInfo.width*t+a,e.menuHide()},this.stop_select=function(n,t){var a=this.getLinePos(n);return e.currentSelect.stop=e.formInfo.width*t+a,e.currentSelect.stop===e.currentSelect.start?void i.clear_select():(e.blast_sequence=getSelectedDNA(),$("#location").hide(),$("#menuSelect").css({top:n.clientY+5,left:n.clientX+5}).show(),void(e.menu_shown=1))},this.clear_select=function(){e.currentSelect.start=-1,e.currentSelect.end=-1,e.menuHide},this.untrack=function(){$("#location").hide()},this.sendto=function(n){e.menuHide(),i.clear_select();var t=e.currentSpecies,a=e.serverList[t.division];document.blast_form.action=a.eurl+"/"+t.name+"/Tools/Blast",n.url&&(document.blast_form.action=n.url),s.ga&&(path=n.stat,s.ga("send","pageview",{page:path})),document.blast_form.submit()},this.track=function(n,t,a){if(!e.menu_shown){if(e.currentSelect.start>0){var s=getSelectedDNA();e.location=s.split(/[AGTC]/).length-1+" "+a+" selected"}else{var i=0,o=void 0!==n.offsetX?n.offsetX-i:n.clientX-$(n.target).offset().left,c=Math.floor(o/e.fontWidth)+1;1>c?c=1:c>e.formInfo.width&&(c=e.formInfo.width);var l=e.chunksNum?(e.geneData.currentPage-1)*e.formInfo.chunkSize:0,g=t*e.formInfo.width+c+l,u=e.formInfo.coding,d=u?e.getBPfromCDS(g):e.geneData.strand>0?e.geneData.start+g-1:e.geneData.end-g+1;e.location=r("number")(g)+"  ["+r("number")(d)+" bp]"}$("#location").css({top:n.clientY+10,left:n.clientX+20}).show()}},this.isSet=function(n){return e.currentTab==n},this.hasTranslation=function(){var n=e.getCurrentTranscript(o);return n&&n.pid?!0:!1}}]);